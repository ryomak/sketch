<!DOCTYPE html><html lang="ja"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><script src="/sketch/wasm_exec.js"></script><title>アートギャラリー</title><style>.art-gallery[data-astro-cid-vclcqe5s]{display:flex;gap:16px;padding:16px}.gallery-column[data-astro-cid-vclcqe5s]{display:flex;flex-direction:column;gap:16px;flex:1}.artwork-card[data-astro-cid-vclcqe5s]{break-inside:avoid;background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:all .3s ease}.artwork-card[data-astro-cid-vclcqe5s]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000026}.artwork-card[data-astro-cid-vclcqe5s] a[data-astro-cid-vclcqe5s]{text-decoration:none;color:inherit}.artwork-image[data-astro-cid-vclcqe5s]{position:relative;overflow:hidden}.artwork-preview[data-astro-cid-vclcqe5s]{width:100%;height:auto;display:block}.artwork-info[data-astro-cid-vclcqe5s]{padding:16px}.artwork-info[data-astro-cid-vclcqe5s] h2[data-astro-cid-vclcqe5s]{font-size:18px;margin:0 0 8px;color:#333}.artwork-info[data-astro-cid-vclcqe5s] p[data-astro-cid-vclcqe5s]{font-size:14px;color:#666;margin:0}@media (max-width: 600px){.art-gallery[data-astro-cid-vclcqe5s]{flex-direction:column}}
</style></head> <body>  <main> <div class="art-gallery" data-astro-cid-vclcqe5s> <div class="artwork-card" data-astro-cid-vclcqe5s> <a href="/sketch/artwork/go_art_example" data-astro-cid-vclcqe5s> <div class="artwork-image" data-astro-cid-vclcqe5s> <canvas class="artwork-preview" id="canvas-go_art_example" data-astro-cid-vclcqe5s></canvas> </div> <div class="artwork-info" style="display: none;" data-astro-cid-vclcqe5s> <h2 data-astro-cid-vclcqe5s>memo</h2> <p data-astro-cid-vclcqe5s>memoです</p> </div> </a> </div> </div> <script>(function(){const BaseUrl = "/sketch";
const artworks = [{"code":"go","name":"art_example","title":"memo","description":"memoです"}];

  // WebAssembly loading script (unchanged)
  const loadArtwork = async (art) => {
    const go = new Go();
    const result = await WebAssembly.instantiateStreaming(fetch(`${BaseUrl}/wasm/${art.code}_${art.name}.wasm`), go.importObject);
    await go.run(result.instance);
  };
  const loadAllArtworks = artworks.map(loadArtwork)
  Promise.all(loadAllArtworks)
})();</script> <script>(function(){const artworks = [{"code":"go","name":"art_example","title":"memo","description":"memoです"}];

  document.addEventListener('DOMContentLoaded', async () => {
    const sleep = (ms) => new Promise((res) => setTimeout(res, ms));
    const loadArtwork = async (a) => {
      const artParamName = `${a.code}_${a.name}`
      const canvasId = `canvas-${artParamName}`;
      const canvasElement = document.getElementById(canvasId);
      if (canvasElement) {
        canvasElement.width = 300;
        canvasElement.height = 300;
        
        await sleep(300)
        const art = eval(artParamName);
        art.generate(canvasId);
      } else {
        console.error('Canvas element not found or generateArt function not available.');
      }
    }
    artworks.forEach(async (preview) => {
      await loadArtwork(preview)
    });

    // Masonry layout
    const gallery = document.querySelector('.art-gallery');
    const cards = document.querySelectorAll('.artwork-card');
    let columns = [];

    function createColumns() {
      gallery.innerHTML = '';
      columns = [];
      const columnCount = window.innerWidth > 1200 ? 4 : window.innerWidth > 900 ? 3 : window.innerWidth > 600 ? 2 : 1;
      
      for (let i = 0; i < columnCount; i++) {
        const column = document.createElement('div');
        column.classList.add('gallery-column');
        gallery.appendChild(column);
        columns.push(column);
      }
    }

    function distributeCards() {
      cards.forEach((card, index) => {
        columns[index % columns.length].appendChild(card);
      });
    }

    function initMasonry() {
      createColumns();
      distributeCards();
    }

    initMasonry();
    window.addEventListener('resize', initMasonry);
  });
})();</script>  </main>  </body></html>