<!DOCTYPE html><html lang="ja"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><script src="/sketch/wasm_exec.js"></script><title>$アートギャラリー</title><style>:root{--primary-color: #00ffff;--secondary-color: #ff00ff;--bg-color: #0a0a0a;--text-color: #ffffff}body{background-color:var(--bg-color);color:var(--text-color);font-family:Roboto,sans-serif}.artwork-detail[data-astro-cid-f2ihqk6a]{max-width:1200px;width:95%;margin:2rem auto;padding:2rem;background:#ffffff0d;border-radius:20px;box-shadow:0 0 20px #0ff3;backdrop-filter:blur(10px)}.artwork-container[data-astro-cid-f2ihqk6a]{display:flex;flex-direction:column;gap:2rem}.canvas-container[data-astro-cid-f2ihqk6a]{position:relative;width:100%;padding-bottom:100%;overflow:hidden;border-radius:15px;box-shadow:0 0 30px #00ffff4d}.artwork-canvas[data-astro-cid-f2ihqk6a]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}#generate-button[data-astro-cid-f2ihqk6a]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);padding:.8rem 2rem;background-color:#0ff3;color:var(--primary-color);border:2px solid var(--primary-color);border-radius:30px;font-size:1rem;cursor:pointer;transition:all .3s ease}#generate-button[data-astro-cid-f2ihqk6a]:hover{background-color:var(--primary-color);color:var(--bg-color);box-shadow:0 0 20px var(--primary-color)}.go-code[data-astro-cid-f2ihqk6a]{background:#ffffff0d;border-radius:15px;padding:1.5rem;overflow-x:auto;border:1px solid var(--primary-color)}.go-code[data-astro-cid-f2ihqk6a] pre[data-astro-cid-f2ihqk6a]{margin:0}.go-code[data-astro-cid-f2ihqk6a] code[data-astro-cid-f2ihqk6a]{color:var(--primary-color);font-family:Courier New,monospace;font-size:.9rem}.artwork-info[data-astro-cid-f2ihqk6a]{text-align:center;padding:2rem;background:#ffffff0d;border-radius:15px;box-shadow:0 0 20px #f0f3}.artwork-info[data-astro-cid-f2ihqk6a] h1[data-astro-cid-f2ihqk6a]{font-size:2.5rem;margin-bottom:1rem;color:var(--primary-color);text-shadow:0 0 10px var(--primary-color)}.artwork-info[data-astro-cid-f2ihqk6a] p[data-astro-cid-f2ihqk6a]{font-size:1.1rem;color:var(--text-color);max-width:800px;margin:0 auto;line-height:1.6}@media (min-width: 768px){.artwork-container[data-astro-cid-f2ihqk6a]{flex-direction:row}.canvas-container[data-astro-cid-f2ihqk6a]{flex:1;padding-bottom:50%}.go-code[data-astro-cid-f2ihqk6a]{flex:1;max-height:400px}}@keyframes glow{0%{box-shadow:0 0 20px var(--primary-color)}50%{box-shadow:0 0 30px var(--secondary-color)}to{box-shadow:0 0 20px var(--primary-color)}}.artwork-detail[data-astro-cid-f2ihqk6a]{animation:glow 5s infinite alternate}
</style></head> <body>  <main> <div class="artwork-detail" data-astro-cid-f2ihqk6a> <div class="artwork-container" data-astro-cid-f2ihqk6a> <div class="canvas-container" data-astro-cid-f2ihqk6a> <canvas class="artwork-canvas" id="canvas-detail" data-astro-cid-f2ihqk6a></canvas> <button id="generate-button" data-astro-cid-f2ihqk6a>生成</button> </div> <div data-astro-cid-f2ihqk6a> <h3 data-astro-cid-f2ihqk6a>Goコード</h3> <div class="go-code" data-astro-cid-f2ihqk6a> <pre data-astro-cid-f2ihqk6a><code data-astro-cid-f2ihqk6a>package main

import (
	&quot;fmt&quot;
	&quot;math/rand&quot;
	&quot;syscall/js&quot;

	&quot;github.com/ryomak/sketch/art&quot;
)

func main() {
	art.Do(&quot;go_art_example&quot;,Art{})
}

var _ art.Interface = Art{}
type Art struct{}

func (Art) Title() any {
	return &quot;幾何学&quot;
}

func (Art) Description() any {
	return &quot;幾何学aaaa&quot;
}

func (Art) Generate(this js.Value, args []js.Value) any {
	if len(args) &lt; 1 {
		fmt.Println(&quot;Error: Canvas ID not provided&quot;)
		return nil
	}

	canvasID := args[0].String()
	canvas := js.Global().Get(&quot;document&quot;).Call(&quot;getElementById&quot;, canvasID)
	if canvas.IsNull() {
		fmt.Printf(&quot;Error: Canvas with ID &#39;%s&#39; not found\n&quot;, canvasID)
		return nil
	}

	ctx := canvas.Call(&quot;getContext&quot;, &quot;2d&quot;)

	width := canvas.Get(&quot;width&quot;).Int()
	height := canvas.Get(&quot;height&quot;).Int()

	// キャンバスをクリア
	ctx.Call(&quot;clearRect&quot;, 0, 0, width, height)

	// ここでアートを生成
	// 例：ランダムな色の円を描画
	for i := 0; i &lt; 50; i++ {
		x := rand.Float64() * float64(width)
		y := rand.Float64() * float64(height)
		radius := rand.Float64() * 20

		ctx.Set(&quot;fillStyle&quot;, randomColor())
		ctx.Call(&quot;beginPath&quot;)
		ctx.Call(&quot;arc&quot;, x, y, radius, 0, 2*3.14159)
		ctx.Call(&quot;fill&quot;)
	}

	return nil
}

func randomColor() string {
	r := rand.Intn(256)
	g := rand.Intn(256)
	b := rand.Intn(256)
	return fmt.Sprintf(&quot;rgb(%d, %d, %d)&quot;, r, g, b)
}
</code></pre> </div> </div> </div> <div class="artwork-info" data-astro-cid-f2ihqk6a> <h1 id="title" data-astro-cid-f2ihqk6a></h1> <p id="description" data-astro-cid-f2ihqk6a></p> </div> </div> <script>(function(){const wasmFilePath = "/sketch/wasm/go_art_example.wasm";

	async function initWasm() {
		if (typeof Go !== 'undefined') {
			const go = new Go();
			const result = await WebAssembly.instantiateStreaming(fetch(wasmFilePath), go.importObject);
			const inst = result.instance;
			await go.run(inst);
		} else {
			console.error('Go is not defined. Make sure wasm_exec.js is loaded correctly.');
		}
	}
	initWasm();
})();</script> <script>(function(){const artwork = {"language":"go","name":"art_example"};
const BaseUrl = "/sketch";
const artParamName = "go_art_example";

	
  document.addEventListener('DOMContentLoaded', async () => {
	const sleep = (ms) => new Promise((res) => setTimeout(res, ms));

	// GoのLoadをまつ
	await sleep(1000)
	art = eval(artParamName);

	
    const generateButton = document.getElementById('generate-button');
	document.getElementById('title').innerText = art.title
	document.getElementById('description').innerText = art.description

    generateButton.addEventListener('click', ()=>{
		const canvasId = `canvas-detail`;
		const canvasElement = document.getElementById(canvasId);

		if (canvasElement) {
			// キャンバスのサイズを設定
			canvasElement.width = window.innerWidth > 400 ? 400:  window.innerWidth > 400;
			canvasElement.height = canvasElement.width;
			
			// Go側で定義した関数を呼び出し、canvasIdを渡す
			art.generate(canvasId);
		} else {
			console.error('Canvas element not found or generateArt function not available.');
		}
	});

	generateButton.click();
  });
})();</script>  </main>  </body></html>